<div class="overlay">
    <i class="fas fa-spin fa-spinner"></i>
    <p>Loading</p>
</div>
<div id="transposer-page">
    <form id="transposer-form" [ngClass]="{'disabled': processing}">
        <legend>Data Transposer</legend>
        <div id="field-selection-container">
            <p-pickList [source]="allFields" [target]="selectedFields" [dragdrop]="true" sourceHeader="Available" targetHeader="Selected">
                <ng-template let-field pTemplate="field">
                        <div>{{field.label}}</div>
                </ng-template>
            </p-pickList>
        </div>
        <div class="ui-grid-row">
            <div class="field">
                <label for="separatorInput">Separator</label>
                <input pInputText type="text" name="separatorInput" [(ngModel)]="separator"><br>
            </div>
            <div class="field">
                <label for="fieldCountInput">Field Count</label>
                <p-inputNumber min="1" name="fieldCountInput" [(ngModel)]="fieldCount" (ngModelChange)="updateSelectableFields()"></p-inputNumber>
            </div>
            <button pButton type="button" (click)="toggleOverlay()" label="Overlay"></button>

        </div>
        <div class="field">
            <p-fileUpload #uploader name="fileInput" [showUploadButton]="true" [showCancelButton]="false" uploadLabel="Process" customUpload="true" (uploadHandler)="handleFileUpload($event)">
                <ng-template pTemplate="toolbar">
                    <button pButton type="button" [disabled]="!showDownloadButton" label="Results"
                    (click)="downloadProcessedFile()">
                    </button>
                </ng-template> 
            </p-fileUpload>
        </div>
    </form>
</div>






